(()=>{"use strict";const e=()=>{const e=new Audio("https://www.fesliyanstudios.com/play-mp3/5269");e.volume=.3;const t=document.querySelectorAll(".item"),s=document.querySelector(".game-table"),r=document.querySelector(".results-table"),o=document.querySelector(".first-score-table .score"),n=document.querySelector(".first-score-table"),i=document.querySelector(".second-score-table .score"),l=document.querySelector(".second-score-table"),c=window.getComputedStyle(document.querySelector(".rock")).boxShadow,m=window.getComputedStyle(document.querySelector(".paper")).boxShadow,d=window.getComputedStyle(document.querySelector(".scissors")).boxShadow;let g=[];const u=u=>{new Promise((e=>{s.getAttribute("data-game-status")||(s.setAttribute("data-game-status","in-game"),t.forEach((e=>{e!=u&&g.push(e)})),g[0].animate([{filter:"brightness(100%)"},{filter:"brightness(30%)"}],{duration:1e3,iterations:1}).finished.then((()=>{g[0].style.filter="brightness(30%)",e()})),g[1].animate([{filter:"brightness(100%)"},{filter:"brightness(30%)"}],{duration:1e3,iterations:1}).finished.then((()=>{g[1].style.filter="brightness(30%)",e()})))})).then((()=>{new Promise((e=>{if("item scissors"===u.className){const t=document.createElement("div");t.classList.add("item"),t.classList.add("scissors"),t.innerHTML='<img src="src/images/icon-scissors.svg">',t.setAttribute("data-clone",""),s.append(t),u.style.filter="brightness(30%)",t.style.boxShadow="none",u.style.boxShadow=d,t.style.transform="translate(-25%, -25%) rotate(0deg)",t.animate([{transform:"translate(-25%, -25%) rotate(0deg)"},{transform:"translate(-24%, -159%) rotate(-45deg)"}],{duration:750,iterations:1}).finished.then((()=>{t.style.transform="translate(-24%, -159%) rotate(-45deg)",t.style.zIndex="-1",e()}))}if("item paper"===u.className){const t=document.createElement("div");t.classList.add("item"),t.classList.add("paper"),t.innerHTML='<img src="src/images/icon-paper.svg">',t.setAttribute("data-clone",""),s.append(t),u.style.filter="brightness(30%)",t.style.boxShadow="none",u.style.boxShadow=m,t.style.transform="translate(-25%, -25%) rotate(0deg)",t.animate([{transform:"translate(-25%, -25%) rotate(0deg)"},{transform:"translate(-141%, 25%) rotate(-45deg)"}],{duration:750,iterations:1}).finished.then((()=>{t.style.transform="translate(-141%, 25%) rotate(-45deg)",t.style.zIndex="-1",e()}))}if("item rock"===u.className){const t=document.createElement("div");t.classList.add("item"),t.classList.add("rock"),t.innerHTML='<img src="src/images/icon-rock.svg">',t.setAttribute("data-clone",""),s.append(t),u.style.filter="brightness(30%)",t.style.boxShadow="none",u.style.boxShadow=c,t.style.transform="translate(-25%, -25%) rotate(0deg)",t.animate([{transform:"translate(-25%, -25%) rotate(0deg)"},{transform:"translate(83%, 25%) rotate(-45deg)"}],{duration:750,iterations:1}).finished.then((()=>{t.style.transform="translate(83%, 25%) rotate(-45deg)",t.style.zIndex="-1",e()}))}})).then((()=>{new Promise((s=>{let a=function(e,t){let s=10+6*Math.random();return Math.floor(s)}(),r=0;function o(e){return e<2?++r:r=0,r}function n(a,r){setTimeout((()=>{t[r].style.filter="brightness(70%)"}),120),setTimeout((()=>{t[r].style.filter="brightness(30%)"}),500),a-=1;let i=o(r);setTimeout((()=>{a>1?n(a,i):setTimeout((()=>{t[i].style.filter="brightness(100%)",t[i].style.boxShadow="none",t[i].style.transitionDuration="0.8s",t[i].style.transform="translate(-25%, -21%)",e.play(),s(i)}),100)}),320)}setTimeout((()=>{n(a,r)}),400)})).then((e=>{new Promise((t=>{setTimeout((()=>{"item rock"==u.className&&2==e?(r.innerHTML="YOU WON",r.classList.add("won"),localStorage.setItem("winScore",+localStorage.getItem("winScore")+1),o.innerHTML=+localStorage.getItem("winScore"),n.classList.add("active")):"item rock"==u.className&&1==e?(r.innerHTML="YOU LOSE",r.classList.add("lose"),localStorage.setItem("loseScore",+localStorage.getItem("loseScore")+1),i.innerHTML=+localStorage.getItem("loseScore"),l.classList.add("active")):"item rock"==u.className&&(r.innerHTML="DRAW",r.classList.add("draw")),"item paper"==u.className&&0==e?(r.innerHTML="YOU WON",r.classList.add("won"),localStorage.setItem("winScore",+localStorage.getItem("winScore")+1),o.innerHTML=+localStorage.getItem("winScore"),n.classList.add("active")):"item paper"==u.className&&2==e?(r.innerHTML="YOU LOSE",r.classList.add("lose"),localStorage.setItem("loseScore",+localStorage.getItem("loseScore")+1),i.innerHTML=+localStorage.getItem("loseScore"),l.classList.add("active")):"item paper"==u.className&&(r.innerHTML="DRAW",r.classList.add("draw")),"item scissors"==u.className&&1==e?(r.innerHTML="YOU WON",r.classList.add("won"),localStorage.setItem("winScore",+localStorage.getItem("winScore")+1),o.innerHTML=+localStorage.getItem("winScore"),n.classList.add("active")):"item scissors"==u.className&&0==e?(r.innerHTML="YOU LOSE",r.classList.add("lose"),localStorage.setItem("loseScore",+localStorage.getItem("loseScore")+1),i.innerHTML=+localStorage.getItem("loseScore"),l.classList.add("active")):"item scissors"==u.className&&(r.innerHTML="DRAW",r.classList.add("draw")),t()}),1e3)}))})).then((()=>{new Promise((e=>{setTimeout((()=>{t.forEach((t=>{t.style.transitionDuration="unset","item scissors"===t.className&&t.animate([{transform:"translate(-25%, -25%) rotate(0deg)"},{transform:"translate(-24%, -159%) rotate(-45deg)",filter:"brightness(30%)"}],{duration:1700,easing:"cubic-bezier(0.5, 0.5, 0.4, 1)",iterations:1}).finished.then((()=>{t.style.transform="translate(-24%, -159%) rotate(-45deg)",t.style.filter="brightness(30%)",document.querySelector("[data-clone]").remove(),e()})),"item paper"===t.className&&t.animate([{transform:"translate(-25%, -25%) rotate(0deg)"},{transform:"translate(-141%, 25%) rotate(-45deg)",filter:"brightness(30%)"}],{duration:1700,easing:"cubic-bezier(0.5, 0.5, 0.4, 1)",iterations:1}).finished.then((()=>{t.style.transform="translate(-141%, 25%) rotate(-45deg)",t.style.filter="brightness(30%)"})),"item rock"===t.className&&t.animate([{transform:"translate(-25%, -25%) rotate(0deg)"},{transform:"translate(83%, 25%) rotate(-45deg)",filter:"brightness(30%)"}],{duration:1700,easing:"cubic-bezier(0.5, 0.5, 0.4, 1)",iterations:1}).finished.then((()=>{t.style.transform="translate(83%, 25%) rotate(-45deg)",t.style.filter="brightness(30%)"}))}))}),3e3)})).then((()=>{new Promise((e=>{r.innerHTML="",r.classList.contains("lose")&&(r.classList.remove("lose"),l.classList.remove("active")),r.classList.contains("won")&&(r.classList.remove("won"),n.classList.remove("active")),r.classList.contains("draw")&&r.classList.remove("draw"),t.forEach((e=>{"item scissors"===e.className&&(e.style.boxShadow=d),"item paper"===e.className&&(e.style.boxShadow=m),"item rock"===e.className&&(e.style.boxShadow=c)})),e()})).then((()=>{a()}))}))}))}))}))};t.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),u(e)}),{once:!0})}))},t=document.querySelectorAll(".item"),s=document.querySelector(".game-table"),a=()=>{new Promise((e=>{t.forEach((t=>{"item scissors"===t.className&&t.animate([{transform:"translate(-24%, -159%) rotate(-45deg)",filter:"brightness(30%)"},{transform:"translate(-25%, -25%) rotate(0deg)",filter:"brightness(100%)"}],{duration:1500,easing:"cubic-bezier(0.5, 0.5, 0.4, 1)",iterations:1}).finished.then((()=>{t.style.transform="translate(-25%, -25%) rotate(0deg)",t.style.filter="brightness(100%)"})),"item paper"===t.className&&t.animate([{transform:"translate(-141%, 25%) rotate(-45deg)",filter:"brightness(30%)"},{transform:"translate(-25%, -25%) rotate(0deg)",filter:"brightness(100%)"}],{duration:1500,easing:"cubic-bezier(0.5, 0.5, 0.4, 1)",iterations:1}).finished.then((()=>{t.style.transform="translate(-25%, -25%) rotate(0deg)",t.style.filter="brightness(100%)"})),"item rock"===t.className&&t.animate([{transform:"translate(83%, 25%) rotate(-45deg)",filter:"brightness(30%)"},{transform:"translate(-25%, -25%) rotate(0deg)",filter:"brightness(100%)"}],{duration:1500,easing:"cubic-bezier(0.5, 0.5, 0.4, 1)",iterations:1}).finished.then((()=>{t.style.transform="translate(-25%, -25%) rotate(0deg)",t.style.filter="brightness(100%)",e()}))}))})).then((()=>{s.getAttribute("data-game-status","in-game")&&s.removeAttribute("data-game-status","in-game"),e()}))};localStorage.setItem("winScore",0),localStorage.setItem("loseScore",0),setTimeout((()=>{const e=document.querySelectorAll(".item"),t=document.querySelector(".game-table"),s=window.getComputedStyle(document.querySelector(".rock")).boxShadow,a=window.getComputedStyle(document.querySelector(".paper")).boxShadow,r=window.getComputedStyle(document.querySelector(".scissors")).boxShadow,o=(e,t)=>{"hide"===t?(e.style.boxShadow="none",e.style.transitionDuration="0.8s",e.style.transform="translate(-25%, -21%)"):("item scissors"===e.className&&(e.style.boxShadow=r,e.style.transitionDuration="0.6s",e.style.transform="translate(-25%, -25%)"),"item paper"===e.className&&(e.style.boxShadow=a,e.style.transitionDuration="0.6s",e.style.transform="translate(-25%, -25%)"),"item rock"===e.className&&(e.style.boxShadow=s,e.style.transitionDuration="0.6s",e.style.transform="translate(-25%, -25%)"))};e.forEach((e=>{e.addEventListener("mousemove",(()=>{t.getAttribute("data-game-status","in-game")||o(e,"hide")})),e.addEventListener("mouseout",(()=>{t.getAttribute("data-game-status","in-game")||o(e,"remove")}))}))}),1600),a()})();